use <D:\Zometool\Panels\connector.scad>
sc=(4+2*sqrt(5))/cos(16.5);
points=[
[[ -5.56053582159348, -2.8185661446562, -6.85410196624968 ],[ -5.54508497187474, -2.11803398874989, -7.66311896062463 ],[ -5.36955281596843, -1.10848483846864, -7.35410196624968 ],[ -5.23606797749979, -2.94250183284359, -7.05463412215599 ],[ -5.23606797749979, -2.2935661446562, -6.65356981034338 ],[ -5.24561712778104, -1.30901699437495, -7.02963412215599 ],[ -4.9116001334061, -2.41750183284359, -6.85410196624968 ],[ -4.84455281596843, -1.30901699437495, -7.67856981034338 ],[ -4.72061712778104, -1.50954915028125, -7.35410196624968 ],[ -4.06053582159348, -5.24561712778104, -2.92705098312484 ],[ -3.73606797749979, -5.36955281596843, -3.12758313903115 ],[ -3.73606797749979, -4.72061712778104, -2.72651882721854 ],[ -3.42705098312484, -5.54508497187474, -2.11803398874989 ],[ -3.4116001334061, -4.84455281596843, -2.92705098312484 ],[ -3.25151882721854, -4.53553582159348, -1.80901699437495 ],[ -3.12758313903115, -4.73606797749979, -1.48454915028125 ],[ -2.94250183284359, 2.8185661446562, -5.85410196624968 ],[ -2.8185661446562, 2.61803398874989, -5.52963412215599 ],[ -2.72651882721854, -4.73606797749979, -2.13348483846864 ],[ -2.60258313903115, -4.9366001334061, -1.80901699437495 ],[ -2.41750183284359, 2.61803398874989, -6.17856981034338 ],[ -2.2935661446562, 2.41750183284359, -5.85410196624968 ],[ -2.13348483846864, 2.72651882721854, -4.73606797749979 ],[ -2.11803398874989, 3.42705098312484, -5.54508497187474 ],[ -1.80901699437495, 2.60258313903115, -4.9366001334061 ],[ -1.80901699437495, 3.25151882721854, -4.53553582159348 ],[ -1.48454915028125, 3.12758313903115, -4.73606797749979 ],[ -0.824467844093695, -0.608484838468642, -0.309016994374947 ],[ -0.700532155906305, -0.809016994374947, 0.0154508497187474 ],[ -0.633484838468642, 0.299467844093695, -0.809016994374947 ],[ -0.299467844093695, -0.809016994374947, -0.633484838468642 ],[ -0.309016994374947, 0.175532155906305, -1.00954915028125 ],[ -0.309016994374947, 0.824467844093695, -0.608484838468642 ],[ -0.175532155906305, -1.00954915028125, -0.309016994374947 ],[ 0, 0, 0 ],[ 0.0154508497187474, 0.700532155906305, -0.809016994374947 ]],
[[ -2.13348483846864, 2.72651882721854, -4.73606797749979 ],[ -2.11803398874989, 3.42705098312484, -5.54508497187474 ],[ -2.13348483846864, 4.12758313903115, -4.73606797749979 ],[ -1.80901699437495, 2.60258313903115, -4.9366001334061 ],[ -1.80901699437495, 3.25151882721854, -4.53553582159348 ],[ -1.80901699437495, 3.60258313903115, -4.53553582159348 ],[ -1.80901699437495, 4.25151882721854, -4.9366001334061 ],[ -1.48454915028125, 3.12758313903115, -4.73606797749979 ],[ -1.48454915028125, 3.72651882721854, -4.73606797749979 ],[ -0.633484838468642, 0.299467844093695, -0.809016994374947 ],[ -0.633484838468642, 6.55463412215599, -0.809016994374947 ],[ -0.309016994374947, 0.175532155906305, -1.00954915028125 ],[ -0.309016994374947, 0.824467844093695, -0.608484838468642 ],[ -0.309016994374947, 6.02963412215599, -0.608484838468642 ],[ -0.309016994374947, 6.67856981034338, -1.00954915028125 ],[ -0.200532155906305, 1, -0.324467844093695 ],[ -0.200532155906305, 1, 0.324467844093695 ],[ -0.200532155906305, 5.85410196624968, -0.324467844093695 ],[ -0.200532155906305, 5.85410196624968, 0.324467844093695 ],[ 0, 0, 0 ],[ 0.0154508497187474, 0.700532155906305, -0.809016994374947 ],[ 0.0154508497187474, 6.15356981034338, -0.809016994374947 ],[ 0, 6.85410196624968, 0 ],[ 0.200532155906305, 1, -0.324467844093695 ],[ 0.200532155906305, 1, 0.324467844093695 ],[ 0.200532155906305, 5.85410196624968, -0.324467844093695 ],[ 0.200532155906305, 5.85410196624968, 0.324467844093695 ]],
[[ -0.200532155906305, 1, -0.324467844093695 ],[ -0.200532155906305, 1, 0.324467844093695 ],[ -0.200532155906305, 5.85410196624968, -0.324467844093695 ],[ -0.200532155906305, 5.85410196624968, 0.324467844093695 ],[ 0, 0, 0 ],[ -0.0154508497187474, 0.700532155906305, -0.809016994374947 ],[ -0.0154508497187474, 6.15356981034338, -0.809016994374947 ],[ 0, 6.85410196624968, 0 ],[ 0.200532155906305, 1, -0.324467844093695 ],[ 0.200532155906305, 1, 0.324467844093695 ],[ 0.200532155906305, 5.85410196624968, -0.324467844093695 ],[ 0.200532155906305, 5.85410196624968, 0.324467844093695 ],[ 0.309016994374947, 0.175532155906305, -1.00954915028125 ],[ 0.309016994374947, 0.824467844093695, -0.608484838468642 ],[ 0.309016994374947, 6.02963412215599, -0.608484838468642 ],[ 0.309016994374947, 6.67856981034338, -1.00954915028125 ],[ 0.633484838468642, 0.299467844093695, -0.809016994374947 ],[ 0.633484838468642, 6.55463412215599, -0.809016994374947 ],[ 1.48454915028125, 3.12758313903115, -4.73606797749979 ],[ 1.48454915028125, 3.72651882721854, -4.73606797749979 ],[ 1.80901699437495, 2.60258313903115, -4.9366001334061 ],[ 1.80901699437495, 3.25151882721854, -4.53553582159348 ],[ 1.80901699437495, 3.60258313903115, -4.53553582159348 ],[ 1.80901699437495, 4.25151882721854, -4.9366001334061 ],[ 2.13348483846864, 2.72651882721854, -4.73606797749979 ],[ 2.11803398874989, 3.42705098312484, -5.54508497187474 ],[ 2.13348483846864, 4.12758313903115, -4.73606797749979 ]]
];

module panel(indent=5,wall=5,height=8,bottom=8) {
    rotate([0,0,-110.905157]) rotate([-120,0,0]) color("#BBBBBB80") difference() {
        translate([0,0,-height/2/sc]) linear_extrude(height=height/sc) offset(delta=(wall-indent)/sc) projection() rotate([120,0,0]) rotate([0,0,110.905157]) polyhedron(points[0],faces=[[ 12, 34, 23, 1 ]]);
    if (bottom>0) {
        translate([0,0,(-height/2+bottom)/sc]) linear_extrude(height=height/sc) offset(delta=-indent/sc) projection() rotate([120,0,0]) rotate([0,0,110.905157]) polyhedron(points[0],faces=[[ 12, 34, 23, 1 ]]);
        }
    else {
        translate([0,0,-height/2/sc]) linear_extrude(height=(height+bottom)/sc)offset(delta=-indent/sc) projection() rotate([120,0,0]) rotate([0,0,110.905157]) polyhedron(points[0],faces=[[ 12, 34, 23, 1 ]]);
        }
    }
}

module triangle1(a,b,c,indent=5,wall=5,height=8,bottom=8,e1=true,e2=true,e3=true,h1=0,h2=0,h3=0) {
    P=[points[1][a],points[1][b],points[1][c]];
    O=[(P[1][1]-P[0][1])*(P[2][2]-P[0][2])-(P[1][2]-P[0][2])*(P[2][1]-P[0][1]),
       (P[1][2]-P[0][2])*(P[2][0]-P[0][0])-(P[1][0]-P[0][0])*(P[2][2]-P[0][2]),
       (P[1][0]-P[0][0])*(P[2][1]-P[0][1])-(P[1][1]-P[0][1])*(P[2][0]-P[0][0])];
    lO=sqrt(O[0]*O[0]+O[1]*O[1]+O[2]*O[2]);
    N=[[O[0]/lO* height/2/sc        ,O[1]/lO* height/2/sc,         O[2]/lO* height/2/sc],
       [O[0]/lO*(height/2-bottom)/sc,O[1]/lO*(height/2-bottom)/sc, O[2]/lO*(height/2-bottom)/sc],
       [O[0]/lO*(height+indent)/sc,O[1]/lO*(height+indent)/sc, O[2]/lO*(height+indent)/sc]];
    L=[sqrt((P[2][0]-P[1][0])*(P[2][0]-P[1][0])+(P[2][1]-P[1][1])*(P[2][1]-P[1][1])+(P[2][2]-P[1][2])*(P[2][2]-P[1][2])),
       sqrt((P[0][0]-P[2][0])*(P[0][0]-P[2][0])+(P[0][1]-P[2][1])*(P[0][1]-P[2][1])+(P[0][2]-P[2][2])*(P[0][2]-P[2][2])),
       sqrt((P[1][0]-P[0][0])*(P[1][0]-P[0][0])+(P[1][1]-P[0][1])*(P[1][1]-P[0][1])+(P[1][2]-P[0][2])*(P[1][2]-P[0][2]))];
    s=(L[0]+L[1]+L[2])/2;
    A=sqrt(s*(s-L[0])*(s-L[1])*(s-L[2]));
    U=[-(height+indent)*L[0]/A/sc,-(height+indent)*L[1]/A/sc, -(height+indent)*L[2]/A/sc];
    V=[(indent-wall)*L[0]/2/A/sc,(indent-wall)*L[1]/2/A/sc,(indent-wall)*L[2]/2/A/sc];
    W=[indent*L[0]/2/A/sc,indent*L[1]/2/A/sc, indent*L[2]/2/A/sc];
    Q=[[(1-V[1]-V[2])*P[0][0]+V[1]*P[1][0]+V[2]*P[2][0],(1-V[1]-V[2])*P[0][1]+V[1]*P[1][1]+V[2]*P[2][1],(1-V[1]-V[2])*P[0][2]+V[1]*P[1][2]+V[2]*P[2][2]],
       [V[0]*P[0][0]+(1-V[0]-V[2])*P[1][0]+V[2]*P[2][0],V[0]*P[0][1]+(1-V[0]-V[2])*P[1][1]+V[2]*P[2][1],V[0]*P[0][2]+(1-V[0]-V[2])*P[1][2]+V[2]*P[2][2]],
       [V[0]*P[0][0]+V[1]*P[1][0]+(1-V[0]-V[1])*P[2][0],V[0]*P[0][1]+V[1]*P[1][1]+(1-V[0]-V[1])*P[2][1],V[0]*P[0][2]+V[1]*P[1][2]+(1-V[0]-V[1])*P[2][2]],
       [(1-W[2])*P[0][0]+W[2]*P[2][0],(1-W[2])*P[0][1]+W[2]*P[2][1],(1-W[2])*P[0][2]+W[2]*P[2][2]],
       [(1-W[2])*P[1][0]+W[2]*P[2][0],(1-W[2])*P[1][1]+W[2]*P[2][1],(1-W[2])*P[1][2]+W[2]*P[2][2]],
       [W[0]*P[0][0]+(1-W[0])*P[1][0],W[0]*P[0][1]+(1-W[0])*P[1][1],W[0]*P[0][2]+(1-W[0])*P[1][2]],
       [W[0]*P[0][0]+(1-W[0])*P[2][0],W[0]*P[0][1]+(1-W[0])*P[2][1],W[0]*P[0][2]+(1-W[0])*P[2][2]],
       [W[1]*P[1][0]+(1-W[1])*P[2][0],W[1]*P[1][1]+(1-W[1])*P[2][1],W[1]*P[1][2]+(1-W[1])*P[2][2]],
       [(1-W[1])*P[0][0]+W[1]*P[1][0],(1-W[1])*P[0][1]+W[1]*P[1][1],(1-W[1])*P[0][2]+W[1]*P[1][2]]];
    R=[[Q[0][0]-N[0][0],Q[0][1]-N[0][1],Q[0][2]-N[0][2]],
       [Q[1][0]-N[0][0],Q[1][1]-N[0][1],Q[1][2]-N[0][2]],
       [Q[2][0]-N[0][0],Q[2][1]-N[0][1],Q[2][2]-N[0][2]],
       [Q[0][0]-N[1][0],Q[0][1]-N[1][1],Q[0][2]-N[1][2]],
       [Q[1][0]-N[1][0],Q[1][1]-N[1][1],Q[1][2]-N[1][2]],
       [Q[2][0]-N[1][0],Q[2][1]-N[1][1],Q[2][2]-N[1][2]],
       [Q[3][0]-N[0][0],Q[3][1]-N[0][1],Q[3][2]-N[0][2]],
       [Q[4][0]-N[0][0],Q[4][1]-N[0][1],Q[4][2]-N[0][2]],
       [Q[5][0]-N[0][0],Q[5][1]-N[0][1],Q[5][2]-N[0][2]],
       [Q[6][0]-N[0][0],Q[6][1]-N[0][1],Q[6][2]-N[0][2]],
       [Q[7][0]-N[0][0],Q[7][1]-N[0][1],Q[7][2]-N[0][2]],
       [Q[8][0]-N[0][0],Q[8][1]-N[0][1],Q[8][2]-N[0][2]],
       [Q[3][0]+N[0][0],Q[3][1]+N[0][1],Q[3][2]+N[0][2]],
       [Q[4][0]+N[0][0],Q[4][1]+N[0][1],Q[4][2]+N[0][2]],
       [Q[5][0]+N[0][0],Q[5][1]+N[0][1],Q[5][2]+N[0][2]],
       [Q[6][0]+N[0][0],Q[6][1]+N[0][1],Q[6][2]+N[0][2]],
       [Q[7][0]+N[0][0],Q[7][1]+N[0][1],Q[7][2]+N[0][2]],
       [Q[8][0]+N[0][0],Q[8][1]+N[0][1],Q[8][2]+N[0][2]],
       [Q[0][0]+N[1][0],Q[0][1]+N[1][1],Q[0][2]+N[1][2]],
       [Q[1][0]+N[1][0],Q[1][1]+N[1][1],Q[1][2]+N[1][2]],
       [Q[2][0]+N[1][0],Q[2][1]+N[1][1],Q[2][2]+N[1][2]],
       [P[0][0]-N[2][0],P[0][1]-N[2][1],P[0][2]-N[2][2]],
       [P[1][0]-N[2][0],P[1][1]-N[2][1],P[1][2]-N[2][2]],
       [P[2][0]-N[2][0],P[2][1]-N[2][1],P[2][2]-N[2][2]],
       [P[0][0]+N[2][0],P[0][1]+N[2][1],P[0][2]+N[2][2]],
       [P[1][0]+N[2][0],P[1][1]+N[2][1],P[1][2]+N[2][2]],
       [P[2][0]+N[2][0],P[2][1]+N[2][1],P[2][2]+N[2][2]],
       [(1-U[2])*P[0][0]+U[2]*P[2][0],(1-U[2])*P[0][1]+U[2]*P[2][1],(1-U[2])*P[0][2]+U[2]*P[2][2]],
       [(1-U[2])*P[1][0]+U[2]*P[2][0],(1-U[2])*P[1][1]+U[2]*P[2][1],(1-U[2])*P[1][2]+U[2]*P[2][2]],
       [U[0]*P[0][0]+(1-U[0])*P[1][0],U[0]*P[0][1]+(1-U[0])*P[1][1],U[0]*P[0][2]+(1-U[0])*P[1][2]],
       [U[0]*P[0][0]+(1-U[0])*P[2][0],U[0]*P[0][1]+(1-U[0])*P[2][1],U[0]*P[0][2]+(1-U[0])*P[2][2]],
       [U[1]*P[1][0]+(1-U[1])*P[2][0],U[1]*P[1][1]+(1-U[1])*P[2][1],U[1]*P[1][2]+(1-U[1])*P[2][2]],
       [(1-U[1])*P[0][0]+U[1]*P[1][0],(1-U[1])*P[0][1]+U[1]*P[1][1],(1-U[1])*P[0][2]+U[1]*P[1][2]],
       [-P[0][0],-P[0][1],-P[0][2]],
       [-P[1][0],-P[1][1],-P[1][2]],
       [-P[2][0],-P[2][1],-P[2][2]],
       [P[0][0]-P[2][0],P[0][1]-P[2][1],P[0][2]-P[2][2]],
       [P[1][0]-P[0][0],P[1][1]-P[0][1],P[1][2]-P[0][2]],
       [P[2][0]-P[1][0],P[2][1]-P[1][1],P[2][2]-P[1][2]]];

    difference() {
        union() {
            intersection() {
                union() {
                    if (e1) {
                        polyhedron(R,faces=[[1,2,9,8],[2,1,19,20],[9,2,20,15],[8,9,15,14],[1,8,14,19],[14,15,20,19]]);
                    }
                    if (e2) {
                        polyhedron(R,faces=[[0,1,7,6],[1,0,18,19],[7,1,19,13],[6,7,13,12],[0,6,12,18],[12,13,19,18]]);
                    }
                    if (e3) {
                        polyhedron(R,faces=[[2,0,11,10],[0,2,20,18],[11,0,18,17],[10,11,17,16],[2,10,16,20],[16,17,18,20]]);
                    }
                }
                polyhedron(R,faces=[[3,4,5],[3,5,20,18],[5,4,19,20],[4,3,18,19],[20,19,18]]);
            }
            polyhedron(R,faces=[[0,1,2],[0,2,5,3],[2,1,4,5],[1,0,3,4],[5,4,3]]);
        }
        union() {
            if (e1) {
                translate(P[1]) rotate(h1,R[38]) translate(R[34]) polyhedron(R,faces=[[25,29,22],[25,26,30,29],[30,29,22,23],[23,22,25,26],[30,23,26]]);
            }
            if (e2) {
                translate(P[0]) rotate(h2,R[37]) translate(R[33]) polyhedron(R,faces=[[24,27,21],[24,25,28,27],[28,27,21,22],[22,21,24,25],[28,22,25]]);
            }
            if (e3) {
                translate(P[2]) rotate(h3,R[36]) translate(R[35]) polyhedron(R,faces=[[26,31,23],[26,24,32,31],[32,31,23,21],[21,23,26,24],[32,21,24]]);
            }
        }
    }
}

module triangle2(a,b,c,indent=5,wall=5,height=8,bottom=8,e1=true,e2=true,e3=true,h1=0,h2=0,h3=0) {
    P=[points[2][a],points[2][b],points[2][c]];
    O=[(P[1][1]-P[0][1])*(P[2][2]-P[0][2])-(P[1][2]-P[0][2])*(P[2][1]-P[0][1]),
       (P[1][2]-P[0][2])*(P[2][0]-P[0][0])-(P[1][0]-P[0][0])*(P[2][2]-P[0][2]),
       (P[1][0]-P[0][0])*(P[2][1]-P[0][1])-(P[1][1]-P[0][1])*(P[2][0]-P[0][0])];
    lO=sqrt(O[0]*O[0]+O[1]*O[1]+O[2]*O[2]);
    N=[[O[0]/lO* height/2/sc        ,O[1]/lO* height/2/sc,         O[2]/lO* height/2/sc],
       [O[0]/lO*(height/2-bottom)/sc,O[1]/lO*(height/2-bottom)/sc, O[2]/lO*(height/2-bottom)/sc],
       [O[0]/lO*(height+indent)/sc,O[1]/lO*(height+indent)/sc, O[2]/lO*(height+indent)/sc]];
    L=[sqrt((P[2][0]-P[1][0])*(P[2][0]-P[1][0])+(P[2][1]-P[1][1])*(P[2][1]-P[1][1])+(P[2][2]-P[1][2])*(P[2][2]-P[1][2])),
       sqrt((P[0][0]-P[2][0])*(P[0][0]-P[2][0])+(P[0][1]-P[2][1])*(P[0][1]-P[2][1])+(P[0][2]-P[2][2])*(P[0][2]-P[2][2])),
       sqrt((P[1][0]-P[0][0])*(P[1][0]-P[0][0])+(P[1][1]-P[0][1])*(P[1][1]-P[0][1])+(P[1][2]-P[0][2])*(P[1][2]-P[0][2]))];
    s=(L[0]+L[1]+L[2])/2;
    A=sqrt(s*(s-L[0])*(s-L[1])*(s-L[2]));
    U=[-(height+indent)*L[0]/A/sc,-(height+indent)*L[1]/A/sc, -(height+indent)*L[2]/A/sc];
    V=[(indent-wall)*L[0]/2/A/sc,(indent-wall)*L[1]/2/A/sc,(indent-wall)*L[2]/2/A/sc];
    W=[indent*L[0]/2/A/sc,indent*L[1]/2/A/sc, indent*L[2]/2/A/sc];
    Q=[[(1-V[1]-V[2])*P[0][0]+V[1]*P[1][0]+V[2]*P[2][0],(1-V[1]-V[2])*P[0][1]+V[1]*P[1][1]+V[2]*P[2][1],(1-V[1]-V[2])*P[0][2]+V[1]*P[1][2]+V[2]*P[2][2]],
       [V[0]*P[0][0]+(1-V[0]-V[2])*P[1][0]+V[2]*P[2][0],V[0]*P[0][1]+(1-V[0]-V[2])*P[1][1]+V[2]*P[2][1],V[0]*P[0][2]+(1-V[0]-V[2])*P[1][2]+V[2]*P[2][2]],
       [V[0]*P[0][0]+V[1]*P[1][0]+(1-V[0]-V[1])*P[2][0],V[0]*P[0][1]+V[1]*P[1][1]+(1-V[0]-V[1])*P[2][1],V[0]*P[0][2]+V[1]*P[1][2]+(1-V[0]-V[1])*P[2][2]],
       [(1-W[2])*P[0][0]+W[2]*P[2][0],(1-W[2])*P[0][1]+W[2]*P[2][1],(1-W[2])*P[0][2]+W[2]*P[2][2]],
       [(1-W[2])*P[1][0]+W[2]*P[2][0],(1-W[2])*P[1][1]+W[2]*P[2][1],(1-W[2])*P[1][2]+W[2]*P[2][2]],
       [W[0]*P[0][0]+(1-W[0])*P[1][0],W[0]*P[0][1]+(1-W[0])*P[1][1],W[0]*P[0][2]+(1-W[0])*P[1][2]],
       [W[0]*P[0][0]+(1-W[0])*P[2][0],W[0]*P[0][1]+(1-W[0])*P[2][1],W[0]*P[0][2]+(1-W[0])*P[2][2]],
       [W[1]*P[1][0]+(1-W[1])*P[2][0],W[1]*P[1][1]+(1-W[1])*P[2][1],W[1]*P[1][2]+(1-W[1])*P[2][2]],
       [(1-W[1])*P[0][0]+W[1]*P[1][0],(1-W[1])*P[0][1]+W[1]*P[1][1],(1-W[1])*P[0][2]+W[1]*P[1][2]]];
    R=[[Q[0][0]-N[0][0],Q[0][1]-N[0][1],Q[0][2]-N[0][2]],
       [Q[1][0]-N[0][0],Q[1][1]-N[0][1],Q[1][2]-N[0][2]],
       [Q[2][0]-N[0][0],Q[2][1]-N[0][1],Q[2][2]-N[0][2]],
       [Q[0][0]-N[1][0],Q[0][1]-N[1][1],Q[0][2]-N[1][2]],
       [Q[1][0]-N[1][0],Q[1][1]-N[1][1],Q[1][2]-N[1][2]],
       [Q[2][0]-N[1][0],Q[2][1]-N[1][1],Q[2][2]-N[1][2]],
       [Q[3][0]-N[0][0],Q[3][1]-N[0][1],Q[3][2]-N[0][2]],
       [Q[4][0]-N[0][0],Q[4][1]-N[0][1],Q[4][2]-N[0][2]],
       [Q[5][0]-N[0][0],Q[5][1]-N[0][1],Q[5][2]-N[0][2]],
       [Q[6][0]-N[0][0],Q[6][1]-N[0][1],Q[6][2]-N[0][2]],
       [Q[7][0]-N[0][0],Q[7][1]-N[0][1],Q[7][2]-N[0][2]],
       [Q[8][0]-N[0][0],Q[8][1]-N[0][1],Q[8][2]-N[0][2]],
       [Q[3][0]+N[0][0],Q[3][1]+N[0][1],Q[3][2]+N[0][2]],
       [Q[4][0]+N[0][0],Q[4][1]+N[0][1],Q[4][2]+N[0][2]],
       [Q[5][0]+N[0][0],Q[5][1]+N[0][1],Q[5][2]+N[0][2]],
       [Q[6][0]+N[0][0],Q[6][1]+N[0][1],Q[6][2]+N[0][2]],
       [Q[7][0]+N[0][0],Q[7][1]+N[0][1],Q[7][2]+N[0][2]],
       [Q[8][0]+N[0][0],Q[8][1]+N[0][1],Q[8][2]+N[0][2]],
       [Q[0][0]+N[1][0],Q[0][1]+N[1][1],Q[0][2]+N[1][2]],
       [Q[1][0]+N[1][0],Q[1][1]+N[1][1],Q[1][2]+N[1][2]],
       [Q[2][0]+N[1][0],Q[2][1]+N[1][1],Q[2][2]+N[1][2]],
       [P[0][0]-N[2][0],P[0][1]-N[2][1],P[0][2]-N[2][2]],
       [P[1][0]-N[2][0],P[1][1]-N[2][1],P[1][2]-N[2][2]],
       [P[2][0]-N[2][0],P[2][1]-N[2][1],P[2][2]-N[2][2]],
       [P[0][0]+N[2][0],P[0][1]+N[2][1],P[0][2]+N[2][2]],
       [P[1][0]+N[2][0],P[1][1]+N[2][1],P[1][2]+N[2][2]],
       [P[2][0]+N[2][0],P[2][1]+N[2][1],P[2][2]+N[2][2]],
       [(1-U[2])*P[0][0]+U[2]*P[2][0],(1-U[2])*P[0][1]+U[2]*P[2][1],(1-U[2])*P[0][2]+U[2]*P[2][2]],
       [(1-U[2])*P[1][0]+U[2]*P[2][0],(1-U[2])*P[1][1]+U[2]*P[2][1],(1-U[2])*P[1][2]+U[2]*P[2][2]],
       [U[0]*P[0][0]+(1-U[0])*P[1][0],U[0]*P[0][1]+(1-U[0])*P[1][1],U[0]*P[0][2]+(1-U[0])*P[1][2]],
       [U[0]*P[0][0]+(1-U[0])*P[2][0],U[0]*P[0][1]+(1-U[0])*P[2][1],U[0]*P[0][2]+(1-U[0])*P[2][2]],
       [U[1]*P[1][0]+(1-U[1])*P[2][0],U[1]*P[1][1]+(1-U[1])*P[2][1],U[1]*P[1][2]+(1-U[1])*P[2][2]],
       [(1-U[1])*P[0][0]+U[1]*P[1][0],(1-U[1])*P[0][1]+U[1]*P[1][1],(1-U[1])*P[0][2]+U[1]*P[1][2]],
       [-P[0][0],-P[0][1],-P[0][2]],
       [-P[1][0],-P[1][1],-P[1][2]],
       [-P[2][0],-P[2][1],-P[2][2]],
       [P[0][0]-P[2][0],P[0][1]-P[2][1],P[0][2]-P[2][2]],
       [P[1][0]-P[0][0],P[1][1]-P[0][1],P[1][2]-P[0][2]],
       [P[2][0]-P[1][0],P[2][1]-P[1][1],P[2][2]-P[1][2]]];

    difference() {
        union() {
            intersection() {
                union() {
                    if (e1) {
                        polyhedron(R,faces=[[1,2,9,8],[2,1,19,20],[9,2,20,15],[8,9,15,14],[1,8,14,19],[14,15,20,19]]);
                    }
                    if (e2) {
                        polyhedron(R,faces=[[0,1,7,6],[1,0,18,19],[7,1,19,13],[6,7,13,12],[0,6,12,18],[12,13,19,18]]);
                    }
                    if (e3) {
                        polyhedron(R,faces=[[2,0,11,10],[0,2,20,18],[11,0,18,17],[10,11,17,16],[2,10,16,20],[16,17,18,20]]);
                    }
                }
                polyhedron(R,faces=[[3,4,5],[3,5,20,18],[5,4,19,20],[4,3,18,19],[20,19,18]]);
            }
            polyhedron(R,faces=[[0,1,2],[0,2,5,3],[2,1,4,5],[1,0,3,4],[5,4,3]]);
        }
        union() {
            if (e1) {
                translate(P[1]) rotate(h1,R[38]) translate(R[34]) polyhedron(R,faces=[[25,29,22],[25,26,30,29],[30,29,22,23],[23,22,25,26],[30,23,26]]);
            }
            if (e2) {
                translate(P[0]) rotate(h2,R[37]) translate(R[33]) polyhedron(R,faces=[[24,27,21],[24,25,28,27],[28,27,21,22],[22,21,24,25],[28,22,25]]);
            }
            if (e3) {
                translate(P[2]) rotate(h3,R[36]) translate(R[35]) polyhedron(R,faces=[[26,31,23],[26,24,32,31],[32,31,23,21],[21,23,26,24],[32,21,24]]);
            }
        }
    }
}


color("teal") translate([-10,7,0]) scale(sc) rotate([0,0,87]) rotate([120,0,0]) rotate([0,0,110.905157]) difference () {
render() {
    panel(4.8,4,8.5,0.6);
  }
render() {
    translate([-5.54508497187474,-2.11803398874989,-7.66311896062463]) scale([1.05,1.05,1.05]) connector();
    translate([-2.11803398874989,3.42705098312484,-5.54508497187474]) scale([1.05,1.05,1.05]) connector();
    scale([1.05,1.05,1.05]) connector();
    translate([-3.42705098312484,-5.54508497187474,-2.11803398874989]) scale([1.05,1.05,1.05]) connector();
    polyhedron(points[0],faces=[[ 31, 24, 22, 29 ],[ 25, 22, 24, 26 ],[ 29, 32, 35, 31 ],[ 32, 25, 26, 35 ],[ 25, 32, 29, 22 ],[ 24, 31, 35, 26 ]]);
    polyhedron(points[0],faces=[[ 20, 7, 8, 21 ],[ 5, 17, 21, 8 ],[ 7, 2, 5, 8 ],[ 7, 20, 16, 2 ],[ 16, 20, 21, 17 ],[ 17, 5, 2, 16 ]]);
    polyhedron(points[0],faces=[[ 13, 6, 3, 10 ],[ 6, 13, 11, 4 ],[ 9, 0, 4, 11 ],[ 13, 10, 9, 11 ],[ 3, 6, 4, 0 ],[ 0, 9, 10, 3 ]]);
    polyhedron(points[0],faces=[[ 14, 27, 28, 15 ],[ 27, 14, 18, 30 ],[ 15, 19, 18, 14 ],[ 33, 19, 15, 28 ],[ 19, 33, 30, 18 ],[ 33, 28, 27, 30 ]]);
    rotate([0,0,-110.905157]) rotate([-120,0,0]) union() {
        translate([3.9572,8.8486,0]) rotate(-2-69.09/2,[-6.4029,-2.4457,0]) translate([-3.9572,-8.8486,-2]) linear_extrude(4) polygon(points=[[3.9572,8.8486],[3.6004,9.7828],[-2.8025,7.3371],[-2.4457,6.4029]]);
        rotate(-2-69.09/2,[6.4029,2.4457,0]) translate([0,0,-2]) linear_extrude(4) polygon(points=[[0,0],[0.3568,-0.9342],[6.7597,1.5115],[6.4029,2.4457]]);
        translate([-2.4457,6.4029,0]) rotate(2+20.91/2,[2.4457,-6.4029,0]) translate([2.4457,-6.4029,-2]) linear_extrude(4) polygon(points=[[-2.4457,6.4029],[-3.3799,6.0461],[-0.9342,-0.3568],[0,0]]);
        translate([6.4029,2.4457,0]) rotate(2+20.91/2,[-2.4457,6.4029,0]) translate([-6.4029,-2.4457,-2]) linear_extrude(4) polygon(points=[[6.4029,2.4457],[7.3371,2.8025],[4.8914,9.2054],[3.9572,8.8486]]);
        }
    }
}


color("teal") scale(sc) rotate([0,0,135]) rotate([110.905157,0,0]) rotate([0,0,90]) difference () {
render() {
    triangle1(1,22,19,4.8,4.8,8.5,0.6,true,true,true,-2-69.09/2,-2-69.09/2,-2-69.09/2);
  }
render() {
    translate([-2.11803398874989,3.42705098312484,-5.54508497187474]) scale([1.05,1.05,1.05]) connector();
    translate([0,6.85410196624968,0]) scale([1.05,1.05,1.05]) connector();
    scale([1.05,1.05,1.05]) connector();
    polyhedron(points[1],faces=[[ 25, 26, 18, 17 ],[ 23, 25, 17, 15 ],[ 25, 23, 24, 26 ],[ 16, 18, 26, 24 ],[ 24, 23, 15, 16 ],[ 18, 16, 15, 17 ]]);
    polyhedron(points[1],faces=[[ 12, 4, 7, 20 ],[ 11, 3, 0, 9 ],[ 3, 11, 20, 7 ],[ 4, 12, 9, 0 ],[ 4, 0, 3, 7 ],[ 9, 12, 20, 11 ]]);
    polyhedron(points[1],faces=[[ 14, 6, 8, 21 ],[ 5, 13, 21, 8 ],[ 13, 10, 14, 21 ],[ 2, 5, 8, 6 ],[ 6, 14, 10, 2 ],[ 13, 5, 2, 10 ]]);

    }
}

color("teal") scale(sc) rotate([0,0,124]) rotate ([atan2(6.85410196624968,4.23606797749979),0,0]) difference () {
render() {

    triangle1(19,1,22,4.8,4.8,8.5,0.6,true,true,false,2+20.91/2,2+20.91/2,0);
    triangle2(25,4,7 ,4.8,4.8,8.5,0.6,false,true,true,0,2+20.91/2,2+20.91/2);
    scale(sc) tubesector(5.24/sc,0,6.85410196624968,0,0.5,90); 

  }
render() {
    translate([-2.11803398874989,3.42705098312484,-5.54508497187474]) scale([1.05,1.05,1.05]) connector();
    scale([1.05,1.05,1.05]) connector();

    translate([0,6.85410196624968,0]) scale([1.05,1.05,1.05]) connector();
    translate([2.11803398874989,3.42705098312484,-5.54508497187474]) scale([1.05,1.05,1.05]) connector();

    polyhedron(points[1],faces=[[ 12, 4, 7, 20 ],[ 11, 3, 0, 9 ],[ 3, 11, 20, 7 ],[ 4, 12, 9, 0 ],[ 4, 0, 3, 7 ],[ 9, 12, 20, 11 ]]);
    polyhedron(points[1],faces=[[ 14, 6, 8, 21 ],[ 5, 13, 21, 8 ],[ 13, 10, 14, 21 ],[ 2, 5, 8, 6 ],[ 6, 14, 10, 2 ],[ 13, 5, 2, 10 ]]);

    polyhedron(points[2],faces=[[ 13, 21, 24, 16 ],[ 21, 13, 5, 18 ],[ 12, 5, 13, 16 ],[ 20, 12, 16, 24 ],[ 18, 20, 24, 21 ],[ 12, 20, 18, 5 ]]);
    polyhedron(points[2],faces=[[ 6, 15, 17, 14 ],[ 23, 19, 22, 26 ],[ 15, 23, 26, 17 ],[ 23, 15, 6, 19 ],[ 22, 14, 17, 26 ],[ 14, 22, 19, 6 ]]);

    }
}



module tubesector(r,x0,y0,z0,frac,rot) {
    hz=atan2(x0,y0);
    hx=atan2(sqrt(x0*x0+y0*y0),z0);
    rotate([0,0,-hz])     
    rotate([-hx,0,0]) 
    rotate([0,0,rot]) scale(1/sc) difference() {
        linear_extrude(sqrt(x0*x0+y0*y0+z0*z0)) circle(r,$fn=5);
        linear_extrude(sqrt(x0*x0+y0*y0+z0*z0)) translate([2*r*frac,0,0]) square(2*r,center=true);
    }
}


color("cyan") scale(sc) rotate([0,0,-135]) rotate([110.905157,0,0]) rotate([0,0,90]) difference () {
render() {
    triangle1(1,22,19,4.8,4.8,8.5,0.6,true,true,true,2+69.09/2,-2-41.81/2,-2-41.81/2);
  }
render() {
    translate([-2.11803398874989,3.42705098312484,-5.54508497187474]) scale([1.05,1.05,1.05]) connector();
    translate([0,6.85410196624968,0]) scale([1.05,1.05,1.05]) connector();
    scale([1.05,1.05,1.05]) connector();
    polyhedron(points[1],faces=[[ 25, 26, 18, 17 ],[ 23, 25, 17, 15 ],[ 25, 23, 24, 26 ],[ 16, 18, 26, 24 ],[ 24, 23, 15, 16 ],[ 18, 16, 15, 17 ]]);
    polyhedron(points[1],faces=[[ 12, 4, 7, 20 ],[ 11, 3, 0, 9 ],[ 3, 11, 20, 7 ],[ 4, 12, 9, 0 ],[ 4, 0, 3, 7 ],[ 9, 12, 20, 11 ]]);
    polyhedron(points[1],faces=[[ 14, 6, 8, 21 ],[ 5, 13, 21, 8 ],[ 13, 10, 14, 21 ],[ 2, 5, 8, 6 ],[ 6, 14, 10, 2 ],[ 13, 5, 2, 10 ]]);

    }
}

color("cyan") translate ([0,5,0]) scale(sc) rotate ([atan2(6.85410196624968,4.23606797749979),0,0]) difference () {
render() {

    triangle1(19,1,22,4.8,4.8,8.5,0.6,true,true,false,2+41.81/2,2+41.81/2,0);
    triangle2(25,4,7 ,4.8,4.8,8.5,0.6,false,true,true,0,2+41.81/2,2+41.81/2);
    scale(sc) tubesector(5.24/sc,0,6.85410196624968,0,0.5,90); 

  }
render() {
    translate([-2.11803398874989,3.42705098312484,-5.54508497187474]) scale([1.05,1.05,1.05]) connector();
    scale([1.05,1.05,1.05]) connector();

    translate([0,6.85410196624968,0]) scale([1.05,1.05,1.05]) connector();
    translate([2.11803398874989,3.42705098312484,-5.54508497187474]) scale([1.05,1.05,1.05]) connector();

    polyhedron(points[1],faces=[[ 12, 4, 7, 20 ],[ 11, 3, 0, 9 ],[ 3, 11, 20, 7 ],[ 4, 12, 9, 0 ],[ 4, 0, 3, 7 ],[ 9, 12, 20, 11 ]]);
    polyhedron(points[1],faces=[[ 14, 6, 8, 21 ],[ 5, 13, 21, 8 ],[ 13, 10, 14, 21 ],[ 2, 5, 8, 6 ],[ 6, 14, 10, 2 ],[ 13, 5, 2, 10 ]]);

    polyhedron(points[2],faces=[[ 13, 21, 24, 16 ],[ 21, 13, 5, 18 ],[ 12, 5, 13, 16 ],[ 20, 12, 16, 24 ],[ 18, 20, 24, 21 ],[ 12, 20, 18, 5 ]]);
    polyhedron(points[2],faces=[[ 6, 15, 17, 14 ],[ 23, 19, 22, 26 ],[ 15, 23, 26, 17 ],[ 23, 15, 6, 19 ],[ 22, 14, 17, 26 ],[ 14, 22, 19, 6 ]]);

    }
}
